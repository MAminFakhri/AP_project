ÃŠÃ¾ÂºÂ¾   A{
       java/lang/Object <init> ()V
  	  
 
  org/example/BookRecommender  readCSV ()Ljava/util/List;
     storeInNeo4j (Ljava/util/List;)V  Harry Potter
     getSimilarBooks $(Ljava/lang/String;)Ljava/util/List;	       java/lang/System out Ljava/io/PrintStream;
      ! " java/lang/String  valueOf &(Ljava/lang/Object;)Ljava/lang/String;   $ % & makeConcatWithConstants &(Ljava/lang/String;)Ljava/lang/String;
 ( )  * + , java/io/PrintStream  println (Ljava/lang/String;)V
  . /  callLlamaAPI  $  2 java/util/ArrayList
 1   5 java/io/FileReader 7 	books.csv
 4 9  ,  ; com/opencsv/CSVReader
 : =  > (Ljava/io/Reader;)V
 : @ A B readNext ()[Ljava/lang/String;  D org/example/Book
 C F  G '(Ljava/lang/String;Ljava/lang/String;)V
 I J  K L M java/util/List add (Ljava/lang/Object;)Z
 : O P  close  R java/lang/Throwable
 Q T U V 
addSuppressed (Ljava/lang/Throwable;)V
 X O  Y java/io/Reader  [ java/io/IOException  ] -com/opencsv/exceptions/CsvValidationException
 _ `  a b  java/lang/Exception printStackTrace	  d e f 
neo4jDriver Lorg/neo4j/driver/Driver;
 h i  j k l org/neo4j/driver/Driver  session ()Lorg/neo4j/driver/Session;
 I n o p iterator ()Ljava/util/Iterator;
 r s  t u v java/util/Iterator  hasNext ()Z
 r x y z next ()Ljava/lang/Object; | /MERGE (b:Book {title: $title, author: $author}) ~ title	 C â‚¬ ~ Â Ljava/lang/String; Æ’ author	 C â€¦ Æ’ Â
 â€¡ Ë†  â€° Å  â€¹ org/neo4j/driver/Values 
parameters -([Ljava/lang/Object;)Lorg/neo4j/driver/Value;
 Â Å½  Â Â â€˜ org/neo4j/driver/Session run E(Ljava/lang/String;Lorg/neo4j/driver/Value;)Lorg/neo4j/driver/Result;
 Â O â€ HMATCH (b:Book {title: $title})-[:SIMILAR_TO]-(rec:Book) RETURN rec.title
 â€“ â€”  Ëœ â„¢ Å¡ org/neo4j/driver/Result stream ()Ljava/util/stream/Stream;  Å“ Â Å¾ accept /(Ljava/util/List;)Ljava/util/function/Consumer;
 Â  Â¡  Â¢ Â£ Â¤ java/util/stream/Stream  forEach  (Ljava/util/function/Consumer;)V Â¦    $
 Â© Âª  Â« Â¬ Â­ java/net/http/HttpClient 
newHttpClient ()Ljava/net/http/HttpClient;
 Â¯ Â°  Â± Â² Â³ java/net/http/HttpRequest 
newBuilder %()Ljava/net/http/HttpRequest$Builder;
 Âµ Â¶  Â· Â¸ Â¹ java/net/URI create "(Ljava/lang/String;)Ljava/net/URI;
 Â» Â¼  Â½ Â¾ Â¿ !java/net/http/HttpRequest$Builder uri 3(Ljava/net/URI;)Ljava/net/http/HttpRequest$Builder; Ã Content-Type Ãƒ application/json
 Â» Ã… Ã† Ã‡ header I(Ljava/lang/String;Ljava/lang/String;)Ljava/net/http/HttpRequest$Builder;
 Ã‰ ÃŠ  Ã‹ ÃŒ Ã (java/net/http/HttpRequest$BodyPublishers ofString =(Ljava/lang/String;)Ljava/net/http/HttpRequest$BodyPublisher;
 Â» Ã Ã Ã‘ POST N(Ljava/net/http/HttpRequest$BodyPublisher;)Ljava/net/http/HttpRequest$Builder;
 Â» Ã“ Ã” Ã• build ()Ljava/net/http/HttpRequest;
 Ã— Ã˜  Ã™ ÃŒ Ãš 'java/net/http/HttpResponse$BodyHandlers *()Ljava/net/http/HttpResponse$BodyHandler;
 Â© Ãœ Ã Ã send a(Ljava/net/http/HttpRequest;Ljava/net/http/HttpResponse$BodyHandler;)Ljava/net/http/HttpResponse;
 Ã  Ã¡  Ã¢ Ã£ z java/net/http/HttpResponse body  Ã¥ +com/fasterxml/jackson/databind/ObjectMapper
 Ã¤ 
 Ã¤ Ã¨ Ã© Ãª readTree =(Ljava/lang/String;)Lcom/fasterxml/jackson/databind/JsonNode; Ã¬ recommendations
 Ã® Ã¯  Ã° Ã± Ãª 'com/fasterxml/jackson/databind/JsonNode get
 Ã® n
 Ã® Ã´ Ãµ Ã¶ asText ()Ljava/lang/String;  Ã¸ java/lang/InterruptedException Ãº 	rec.title
 Ã¼ Ã½  Ã¾ Ã± Ã¿ org/neo4j/driver/Record ,(Ljava/lang/String;)Lorg/neo4j/driver/Value;
  Ã¶ org/neo4j/driver/Value asString bolt://localhost:7687 neo4j
 
Ma1371384#

  org/neo4j/driver/AuthTokens basic B(Ljava/lang/String;Ljava/lang/String;)Lorg/neo4j/driver/AuthToken;
  org/neo4j/driver/GraphDatabase driver I(Ljava/lang/String;Lorg/neo4j/driver/AuthToken;)Lorg/neo4j/driver/Driver; CSV_FILE 
ConstantValue Code LineNumberTable LocalVariableTable this Lorg/example/BookRecommender; main ([Ljava/lang/String;)V args [Ljava/lang/String; books Ljava/util/List; bookName neo4jRecommendations llamaRecommendations LocalVariableTypeTable $Ljava/util/List<Lorg/example/Book;>; $Ljava/util/List<Ljava/lang/String;>; line 	csvReader Lcom/opencsv/CSVReader; reader Ljava/io/Reader; e Ljava/lang/Exception; 
StackMapTable 	Signature &()Ljava/util/List<Lorg/example/Book;>; book Lorg/example/Book; Lorg/neo4j/driver/Session; '(Ljava/util/List<Lorg/example/Book;>;)V result Lorg/neo4j/driver/Result; 8(Ljava/lang/String;)Ljava/util/List<Ljava/lang/String;>; bookNode )Lcom/fasterxml/jackson/databind/JsonNode; response Ljava/net/http/HttpResponse; responseBody mapper -Lcom/fasterxml/jackson/databind/ObjectMapper; jsonResponse apiUrl 
jsonPayload client Ljava/net/http/HttpClient;  request Ljava/net/http/HttpRequest; 0Ljava/net/http/HttpResponse<Ljava/lang/String;>; lambda$getSimilarBooks$0 ,(Ljava/util/List;Lorg/neo4j/driver/Record;)V record Lorg/neo4j/driver/Record; <clinit> 
SourceFile BookRecommender.java BootstrapMethodsS Neo4j Recommended Books: U LLaMA API Recommended Books: W (Ljava/lang/Object;)VY
 ZJK\ (Lorg/neo4j/driver/Record;)V^ 
{"book": ""}`
ab c %d $java/lang/invoke/StringConcatFactory Ëœ(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite;f
gh ijk "java/lang/invoke/LambdaMetafactory 
metafactory ÃŒ(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite; InnerClasses  Builder BodyPublishers p 'java/net/http/HttpRequest$BodyPublisher 
BodyPublisher BodyHandlers t &java/net/http/HttpResponse$BodyHandler 
BodyHandler w %java/lang/invoke/MethodHandles$Lookup y java/lang/invoke/MethodHandles Lookup !       Â     6  e f          /     *Â· Â±                    	    ÃŠ     6Â¸  L+Â¸ 
M,Â¸ NÂ² -Â¸ Âº #  Â¶ ',Â¸ -:Â² Â¸ Âº 0  Â¶ 'Â±      "         
      %   5 !   4    6 !    2"#  
 +$ Â   &%#  % &# '       2"(   &%)  % &)  	 
    â€¢     zÂ» 1YÂ· 3KÂ» 4Y6Â· 8LÂ» :Y+Â· <M,Â¶ ?W,Â¶ ?YNÃ† *Â» CY-2-2Â· EÂ¹ H WÂ§Ã¿Ã£,Â¶ NÂ§ N,Â¶ NÂ§ 
:-Â¶ S-Â¿+Â¶ WÂ§ M+Â¶ WÂ§ 	N,-Â¶ S,Â¿Â§ L+Â¶ ^*Â°   @ G Q H L O Q  Y ` Q a e h Q  p s Z  p s \    :    $  %  &  (   ) ) * @ , G % Y , ` % p . s , t - x /   4  & *!   >+,   ^-.  t /0   r"#  '      r"(  1   M Ã¾    I  X  :F  QÃ¿     I  X  :  Q   Q Ã¹ F  QÃ¿     I  X  Q   QÃ¹ B  _2   3 	     !     rÂ² cÂ¹ g L*Â¹ m M,Â¹ q â„¢ 8,Â¹ w Ã€ CN+{ Â½ Y}SY-Â´ SYâ€šSY-Â´ â€SÂ¸ â€ Â¹ Å’ WÂ§Ã¿Ã…+Ã† "+Â¹ â€™ Â§ M+Ã† +Â¹ â€™ Â§ 	N,-Â¶ S,Â¿Â±  	 N [ Q ` f i Q    & 	   3 	 4 # 5 B 6 E 5 K 7 N 8 [ 3 q 9      # (45  	 h k6    r"#  '       r"(  1   ) Ã½   Â  rÃº =L  QÃ¿ 
   I  Â  Q   QÃ¹ 2   7 	     !     bÂ» 1YÂ· 3LÂ² cÂ¹ g M,â€œÂ½ Y}SY*SÂ¸ â€ Â¹ Å’ N-Â¹ â€¢ +Âº â€º  Â¹ Å¸ ,Ã† $,Â¹ â€™ Â§ N,Ã† ,Â¹ â€™ Â§ 
:-Â¶ S-Â¿+Â°   ; H Q M S V Q    & 	   <  =  > ! ? $ > * @ ; A H = ` B   *  * 89   O k6    b$ Â    Z Ã¬# '      Z Ã¬) 1   / Ã¿ H     I  Â   QÃ¿ 
     I  Â  Q   Q Ã¹ 2   : 	 /         Â£Â» 1YÂ· 3LÂ¥M*Âº Â§  NÂ¸ Â¨:Â¸ Â®,Â¸ Â´Â¹ Âº Ã€Ã‚Â¹ Ã„ -Â¸ ÃˆÂ¹ Ã Â¹ Ã’ :Â¸ Ã–Â¶ Ã›:Â¹ ÃŸ Ã€ : Â» Ã¤YÂ· Ã¦: Â¶ Ã§:		Ã«Â¶ Ã­Â¶ Ã²:

Â¹ q â„¢ 
Â¹ w Ã€ Ã®:
+
Â¶ Ã³Â¹ H WÂ§Ã¿ÃÂ§ 
:Â¶ ^+Â°  < â€” Å¡ Z < â€” Å¡ Ã·    R    F  H 
 K  M  N  O ' P - Q 5 R < U H V T Y ] Z f \ Ë† ] â€ ^ â€” b Å¡ ` Å“ a Â¡ d   z  Ë† ;< 
 H O=>  T C? Â   ] :@A  f 1B< 	 Å“ /0    Â£$ Â    â€º Ã¬#  
 ËœC Â   â€˜D Â   Å’EF  < gGH '     H O=I   â€º Ã¬) 1   H Ã¿ r 
    I      Â©  Â¯  Ã     Ã¤  Ã®  r  Ã¿ $     I      Â©  Â¯  B  _2   :
JK    I     *+Ã¹Â¹ Ã» Â¹  Â¹ H WÂ±          @        Ã¬#     LM  N     3       	Â¸
Â¸Â³ cÂ±           	    O   PQ    _ R_ Te VX[_ ]l   2  Â» Â¯m	 Ã‰ Â¯n 	o Â¯q	 Ã— Ã r 	s Ã u	vxz 
